<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LumiVue ‚Äì Create Product Listing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    :root {
      --lv-bg:#f4f1eb;
      --lv-surface:#ffffff;
      --lv-border:#e6d7c6;
      --lv-border-strong:#d9c6b3;
      --lv-text:#2c1e19;
      --lv-text-muted:#7a6a5c;
      --lv-pill:#e3ceb2;
      --lv-pill-border:#c9a07a;
      --lv-accent-soft:#fbf3e7;
      --lv-shadow-soft:0 24px 60px rgba(15,23,42,.08);
      --lv-radius-lg:14px;
      --lv-radius-md:10px;
    }
    html{scroll-behavior:smooth}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFrame,"SF Pro Text","Helvetica Neue",Arial,sans-serif;background:var(--lv-bg);color:var(--lv-text)}
    a{color:inherit;text-decoration:none}
    .lv-header{position:sticky;top:0;z-index:40;background:linear-gradient(180deg,#fbf8f2 0%, #f6f1ea 100%);border-bottom:1px solid rgba(0,0,0,.06);backdrop-filter:saturate(120%) blur(8px)}
    .lv-header-inner{max-width:1120px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;gap:18px}
    .lv-badge{width:28px;height:28px;border-radius:999px;background:#d3b79e;color:#2b2118;display:grid;place-items:center;font-weight:700;font-size:12px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.28);flex:0 0 28px}
    .lv-wordmark{letter-spacing:.38em;font-weight:700;font-size:13px;margin-left:6px}
    .lv-nav{margin-left:16px;display:flex;align-items:center;gap:18px;font-size:14px;color:var(--lv-text-muted)}
    .lv-nav a{padding:2px 0;border-bottom:1px solid transparent}
    .lv-nav a:hover{color:var(--lv-text);border-bottom-color:var(--lv-border)}
    .lv-nav a.active{color:var(--lv-text);font-weight:600;border-bottom-color:var(--lv-border)}
    .lv-actions{margin-left:auto;display:flex;align-items:center;gap:10px}
    .lv-pill-btn{background:var(--lv-pill);border:1px solid var(--lv-pill-border);color:var(--lv-text);border-radius:999px;padding:6px 12px;font-size:12px;letter-spacing:.06em;cursor:pointer}
    .lv-pill-btn:active{transform:translateY(1px)}
    .lv-pill-btn:hover{transform:none;box-shadow:none}
    .lv-avatar{width:28px;height:28px;border-radius:999px;background:#d3b79e;color:#2b2118;display:grid;place-items:center;font-weight:700;font-size:12px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.28)}
    .lv-main{max-width:1120px;margin:18px auto 32px;padding:0 18px;display:grid;grid-template-columns:minmax(0,2fr) minmax(0,1.1fr);gap:18px;align-items:flex-start}
    @media (max-width:960px){.lv-main{grid-template-columns:1fr}}
    .lv-card{background:var(--lv-surface);border:1px solid var(--lv-border);border-radius:var(--lv-radius-lg);box-shadow:var(--lv-shadow-soft);padding:16px 18px}
    .lv-card + .lv-card{margin-top:12px}
    .lv-card-header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
    .lv-card-title{font-size:15px;font-weight:700}
    .lv-card-subtitle{font-size:12px;color:var(--lv-text-muted);margin-top:2px}
    .lv-card-body{display:flex;flex-direction:column;gap:.85rem}
    .lv-field{display:flex;flex-direction:column;gap:.25rem}
    .lv-label{font-size:.82rem;color:var(--lv-text-muted);font-weight:500}
    .lv-input,.lv-textarea,.lv-select{width:100%;border-radius:10px;border:1px solid var(--lv-border-strong);padding:.55rem .75rem;font-size:.9rem;background:#fff;color:var(--lv-text)}
    .lv-input:focus,.lv-textarea:focus,.lv-select:focus{outline:none;border-color:var(--lv-pill-border);box-shadow:0 0 0 2px var(--lv-accent-soft)}
    .lv-textarea{min-height:140px;resize:vertical;line-height:1.4}
    .lv-help{font-size:.76rem;color:var(--lv-text-muted)}
    .lv-inline-fields{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.85rem}
    @media (max-width:720px){.lv-inline-fields{grid-template-columns:1fr}}
    .lv-media-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:.75rem}
    .lv-media-tile{position:relative;border-radius:var(--lv-radius-md);border:1px dashed var(--lv-border-strong);background:#faf6ef;display:flex;align-items:center;justify-content:center;height:130px;cursor:pointer;overflow:hidden}
    .lv-media-tile.primary{border-style:solid;border-color:var(--lv-pill-border);background:var(--lv-accent-soft)}
    .lv-media-label{font-size:.8rem;color:var(--lv-text-muted);text-align:center;white-space:pre-line;padding:0 .5rem}
    .lv-media-primary-tag{position:absolute;top:.45rem;left:.45rem;font-size:.7rem;padding:.15rem .45rem;border-radius:999px;background:#2c1e19;color:#fff}
    .lv-media-preview{position:absolute;inset:0;object-fit:cover;width:100%;height:100%}
    .lv-media-remove{position:absolute;top:.35rem;right:.35rem;font-size:.75rem;border-radius:999px;background:rgba(17,24,39,.75);color:#fff;padding:.1rem .35rem;cursor:pointer}
    .lv-media-remove:hover{transform:none;box-shadow:none}
    .lv-gallery-previews{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:.6rem;margin-top:.6rem}
    .lv-gallery-tile{position:relative;border-radius:10px;border:1px solid var(--lv-border-strong);overflow:hidden;height:90px}
    .lv-gallery-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .lv-gallery-remove{position:absolute;top:.25rem;right:.25rem;font-size:.7rem;border-radius:999px;background:rgba(17,24,39,.75);color:#fff;padding:.1rem .35rem;cursor:pointer}
    .lv-gallery-remove:hover{transform:none;box-shadow:none}
    .lv-toggle{position:relative;width:40px;height:22px}
    .lv-toggle input{opacity:0;width:0;height:0}
    .lv-toggle-slider{position:absolute;inset:0;border-radius:999px;background:#d1c8bb;transition:.2s}
    .lv-toggle-slider::before{content:"";position:absolute;height:16px;width:16px;left:3px;top:3px;background:#fff;border-radius:50%;transition:.2s;box-shadow:0 0 0 1px rgba(148,163,184,.4)}
    .lv-toggle input:checked + .lv-toggle-slider{background:var(--lv-pill-border)}
    .lv-toggle input:checked + .lv-toggle-slider::before{transform:translateX(18px)}
    
    /* Preview card styles */
    .preview-card{position:sticky;top:80px}
    .preview-product-img{width:100%;height:200px;border-radius:var(--lv-radius-md);background:radial-gradient(circle at top left,#f5e1c7,#f7eee3);object-fit:cover;margin-bottom:10px}
    .preview-status{display:inline-block;background:var(--lv-pill);border:1px solid var(--lv-pill-border);color:var(--lv-text);border-radius:999px;padding:4px 8px;font-size:10px;text-transform:uppercase;letter-spacing:.1em;margin-bottom:8px}
    .preview-title{font-size:16px;font-weight:600;margin-bottom:4px;color:var(--lv-text)}
    .preview-subtitle{font-size:13px;color:var(--lv-text-muted);margin-bottom:8px}
    .preview-price{font-size:20px;font-weight:700;margin-bottom:4px;color:var(--lv-text)}
    .preview-meta{font-size:12px;color:var(--lv-text-muted)}
  </style>
</head>
<body>
  <header class="lv-header">
    <div class="lv-header-inner">
      <div class="lv-badge">LV</div>
      <div class="lv-wordmark">L U M I V U E</div>
      <nav class="lv-nav">
        <a href="dashboard.html">Dashboard</a>
        <a href="listings.html">My products</a>
        <a href="create-listing.html" class="active">Create listing</a>
        <a href="orders.html">Orders</a>
      </nav>
      <div class="lv-actions">
        <button class="lv-pill-btn" id="saveDraftBtnTop">Save draft</button>
        <button class="lv-pill-btn" id="discardBtnTop">Discard</button>
        <button class="lv-pill-btn" id="publishBtnTop">Publish product</button>
        <div class="lv-avatar">M</div>
      </div>
    </div>
  </header>

  <main class="lv-main">
    <section>
      <!-- PRODUCT DETAILS -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Product details</div>
            <p class="lv-card-subtitle">Core information buyers see</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-field">
            <label class="lv-label" for="productTitle">Title</label>
            <input id="productTitle" class="lv-input" type="text" placeholder="Cr√®me de Lumi√®re" />
          </div>
          <div class="lv-field">
            <label class="lv-label" for="productSubtitle">Short subtitle (optional)</label>
            <input id="productSubtitle" class="lv-input" type="text" placeholder="Radiance-restoring moisturizing cream" />
          </div>
          <div class="lv-field">
            <label class="lv-label" for="productDescription">Description</label>
            <textarea id="productDescription" class="lv-textarea" placeholder="Describe your formula, benefits, texture, key ingredients, and how to use."></textarea>
            <p class="lv-help">Full product story and details</p>
          </div>
        </div>
      </div>

      <!-- MEDIA: 1 Display + 19 Gallery + 1 Video -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Media</div>
            <p class="lv-card-subtitle">1 display photo, up to 19 additional photos, and 1 video (30 seconds)</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-media-grid">
            <!-- Display image -->
            <div class="lv-media-tile primary" id="featuredTile">
              <span class="lv-media-primary-tag">Display</span>
              <span class="lv-media-label" id="featuredLabel">Click to upload main product photo
1200 √ó 1200 recommended</span>
              <img id="featuredPreview" class="lv-media-preview" style="display:none;" alt="Featured preview" />
              <span id="featuredRemove" class="lv-media-remove" style="display:none;">‚úï</span>
              <input id="featuredImage" type="file" accept="image/*" style="display:none;" />
            </div>

            <!-- Gallery -->
            <div class="lv-media-tile" id="galleryTile">
              <span class="lv-media-label" id="galleryLabel">Add gallery photos
Up to 19 additional images</span>
              <input id="galleryImages" type="file" accept="image/*" multiple style="display:none;" />
            </div>

            <!-- Video -->
            <div class="lv-media-tile" id="videoTile">
              <span class="lv-media-label" id="videoLabel">Add product video
Up to 30 seconds</span>
              <video id="videoPreview" class="lv-media-preview" style="display:none;" loop playsinline></video>
              <span id="videoRemove" class="lv-media-remove" style="display:none;">‚úï</span>
              <input id="productVideo" type="file" accept="video/*" style="display:none;" />
            </div>
          </div>

          <div class="lv-gallery-previews" id="galleryPreviewContainer"></div>
          <p class="lv-help">Files will upload to Firebase Storage when you publish</p>
        </div>
      </div>

      <!-- PRICING -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Pricing</div>
            <p class="lv-card-subtitle">Set your price and optional compare-at price</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="price">Price</label>
              <div style="display:flex;align-items:center;gap:.35rem;">
                <span style="font-size:.9rem;color:var(--lv-text-muted);padding:.45rem .6rem;border-radius:10px;border:1px solid var(--lv-border-strong);background:#faf6ef">$</span>
                <input id="price" class="lv-input" type="number" step="0.01" min="0" placeholder="45.00" style="flex:1;" />
              </div>
            </div>
            <div class="lv-field">
              <label class="lv-label" for="compareAt">Compare-at price</label>
              <input id="compareAt" class="lv-input" type="number" step="0.01" min="0" placeholder="Optional" />
              <p class="lv-help">Shows a "was" price when higher</p>
            </div>
          </div>
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="costPerItem">Cost per item</label>
              <input id="costPerItem" class="lv-input" type="number" step="0.01" min="0" placeholder="Optional" />
              <p class="lv-help">Private info for profit calculations</p>
            </div>
            <div class="lv-field">
              <label class="lv-label" for="currency">Currency</label>
              <select id="currency" class="lv-select">
                <option value="USD">USD ‚Äì US Dollar</option>
                <option value="CAD">CAD ‚Äì Canadian Dollar</option>
                <option value="EUR">EUR ‚Äì Euro</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- INVENTORY -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Inventory</div>
            <p class="lv-card-subtitle">Track stock levels and SKUs</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="sku">SKU (optional)</label>
              <input id="sku" class="lv-input" type="text" placeholder="CML-902" />
            </div>
            <div class="lv-field">
              <label class="lv-label" for="barcode">Barcode (optional)</label>
              <input id="barcode" class="lv-input" type="text" placeholder="552001789334" />
            </div>
          </div>
          <div class="lv-inline-fields">
            <div class="lv-field">
              <div class="lv-label">Track quantity</div>
              <label class="lv-toggle">
                <input id="trackInventory" type="checkbox" checked />
                <span class="lv-toggle-slider"></span>
              </label>
            </div>
            <div></div>
          </div>
          <div id="inventoryQuantityFields" class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="inventoryLocation">Location</label>
              <input id="inventoryLocation" class="lv-input" type="text" placeholder="Main warehouse" />
            </div>
            <div class="lv-field">
              <label class="lv-label" for="inventoryAvailable">Available</label>
              <input id="inventoryAvailable" class="lv-input" type="number" min="0" step="1" placeholder="10" />
            </div>
          </div>
        </div>
      </div>

      <!-- SHIPPING -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Shipping</div>
            <p class="lv-card-subtitle">Required if you ship a physical product</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="weight">Weight</label>
              <input id="weight" class="lv-input" type="number" step="0.01" min="0" placeholder="0.5" />
              <p class="lv-help">lb or kg</p>
            </div>
            <div class="lv-field">
              <label class="lv-label" for="weightUnit">Unit</label>
              <select id="weightUnit" class="lv-select">
                <option value="lb">lb</option>
                <option value="kg">kg</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- VARIANT METAFIELD -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Variant Metafield</div>
            <p class="lv-card-subtitle">Add variant-specific data (size, color, material)</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="variantSize">Size</label>
              <input id="variantSize" class="lv-input" type="text" placeholder="e.g., 50ml, 2oz, Large" />
            </div>
            <div class="lv-field">
              <label class="lv-label" for="variantColor">Color</label>
              <input id="variantColor" class="lv-input" type="text" placeholder="e.g., Rose Gold, Natural" />
            </div>
          </div>
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="variantMaterial">Material</label>
              <input id="variantMaterial" class="lv-input" type="text" placeholder="e.g., Glass, Recycled Plastic" />
            </div>
            <div class="lv-field">
              <label class="lv-label" for="variantStyle">Style</label>
              <input id="variantStyle" class="lv-input" type="text" placeholder="e.g., Matte, Glossy" />
            </div>
          </div>
        </div>
      </div>

      <!-- GOOGLE SHOPPING FIELDS -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Google Shopping</div>
            <p class="lv-card-subtitle">Required for Google Merchant Center listings</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="googleAgeGroup">Age Group</label>
              <select id="googleAgeGroup" class="lv-select">
                <option value="">Select age group</option>
                <option value="adult">Adult</option>
                <option value="all ages">All Ages</option>
                <option value="teen">Teen</option>
                <option value="kids">Kids</option>
                <option value="toddler">Toddler</option>
                <option value="infant">Infant</option>
                <option value="newborn">Newborn</option>
              </select>
            </div>
            <div class="lv-field">
              <label class="lv-label" for="googleCondition">Condition</label>
              <select id="googleCondition" class="lv-select">
                <option value="new">New</option>
                <option value="refurbished">Refurbished</option>
                <option value="used">Used</option>
              </select>
            </div>
          </div>
          <div class="lv-inline-fields">
            <div class="lv-field">
              <label class="lv-label" for="googleGender">Gender</label>
              <select id="googleGender" class="lv-select">
                <option value="">Select gender</option>
                <option value="unisex">Unisex</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </div>
            <div class="lv-field">
              <label class="lv-label" for="googleMPN">MPN (Manufacturer Part Number)</label>
              <input id="googleMPN" class="lv-input" type="text" placeholder="e.g., SKN-2024-001" />
            </div>
          </div>
        </div>
      </div>

      <!-- SEARCH ENGINE LISTING (SEO) -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">Search Engine Listing</div>
            <p class="lv-card-subtitle">Optimize for Google and other search engines</p>
          </div>
          <button type="button" class="lv-pill-btn" id="autoGenerateSeoBtn" style="font-size:11px;padding:4px 10px;">
            ‚ú® Auto-Generate SEO
          </button>
        </div>
        <div class="lv-card-body">
          <div class="lv-field">
            <label class="lv-label" for="seoTitle">SEO Title</label>
            <input id="seoTitle" class="lv-input" type="text" placeholder="Optimized title for search results" />
            <p class="lv-help">Recommended: 50-60 characters ‚Ä¢ <span id="seoTitleCount">0</span>/60</p>
          </div>
          <div class="lv-field">
            <label class="lv-label" for="seoDescription">SEO Meta Description</label>
            <textarea id="seoDescription" class="lv-textarea" style="min-height:80px;" placeholder="Compelling description for search results"></textarea>
            <p class="lv-help">Recommended: 150-160 characters ‚Ä¢ <span id="seoDescCount">0</span>/160</p>
          </div>
          <div class="lv-field">
            <label class="lv-label" for="seoKeywords">Keywords (comma-separated)</label>
            <input id="seoKeywords" class="lv-input" type="text" placeholder="skincare, moisturizer, organic, cruelty-free" />
            <p class="lv-help">Help Google understand your product ‚Ä¢ <span id="seoKeywordsCount">0</span> keywords</p>
          </div>
          <div class="lv-field">
            <label class="lv-label" for="seoUrl">URL Handle</label>
            <input id="seoUrl" class="lv-input" type="text" placeholder="creme-de-lumiere-moisturizer" />
            <p class="lv-help">Custom URL slug for this product (auto-generated from title)</p>
          </div>
          <div style="background:#e8f5e9;border:1px solid #81c784;border-radius:8px;padding:10px;margin-top:8px;display:none;" id="seoSuccessMessage">
            <div style="font-size:11px;color:#2e7d32;">‚úÖ SEO fields auto-generated! Review and adjust as needed.</div>
          </div>
        </div>
      </div>

      <!-- AI FORMULATION INCI ASSISTANT -->
      <div class="lv-card">
        <div class="lv-card-header">
          <div>
            <div class="lv-card-title">ü§ñ AI Formulation INCI Assistant</div>
            <p class="lv-card-subtitle">AI-powered ingredient list generator for cosmetic products</p>
          </div>
        </div>
        <div class="lv-card-body">
          <div class="lv-field">
            <label class="lv-label" for="productFormulationType">Product Type</label>
            <select id="productFormulationType" class="lv-select">
              <option value="">Select product type</option>
              <option value="moisturizer">Moisturizer / Cream</option>
              <option value="serum">Serum</option>
              <option value="cleanser">Cleanser</option>
              <option value="toner">Toner / Essence</option>
              <option value="mask">Mask</option>
              <option value="oil">Face Oil</option>
              <option value="sunscreen">Sunscreen</option>
              <option value="exfoliant">Exfoliant</option>
              <option value="eye-cream">Eye Cream</option>
              <option value="lip-balm">Lip Balm</option>
              <option value="body-lotion">Body Lotion</option>
              <option value="shampoo">Shampoo</option>
              <option value="conditioner">Conditioner</option>
            </select>
          </div>
          <div class="lv-field">
            <label class="lv-label" for="keyIngredients">Key Active Ingredients</label>
            <input id="keyIngredients" class="lv-input" type="text" placeholder="e.g., hyaluronic acid, niacinamide, vitamin C" />
            <p class="lv-help">Comma-separated list of main active ingredients</p>
          </div>
          <div class="lv-field">
            <label class="lv-label" for="formulationGoal">Formulation Goal</label>
            <textarea id="formulationGoal" class="lv-textarea" style="min-height:60px;" placeholder="e.g., Hydrating, anti-aging, brightening, acne-fighting"></textarea>
            <p class="lv-help">Describe what you want the product to do</p>
          </div>
          <button type="button" class="lv-pill-btn" id="generateInciBtn" style="width:100%;margin-top:8px;">
            ‚ú® Generate INCI Ingredient List
          </button>
          <div id="inciLoadingState" style="display:none;padding:12px;text-align:center;font-size:13px;color:var(--lv-text-muted);">
            <div style="margin-bottom:8px;">ü§ñ AI is analyzing your formulation...</div>
            <div style="font-size:11px;">Generating INCI-compliant ingredient list</div>
          </div>
          <div class="lv-field" id="inciResultField" style="display:none;margin-top:12px;">
            <label class="lv-label">Generated INCI List (in descending order)</label>
            <textarea id="inciResult" class="lv-textarea" style="min-height:120px;" readonly></textarea>
            <p class="lv-help">This is an AI-generated ingredient list. Please verify with your actual formulation and regulatory requirements.</p>
            <button type="button" class="lv-pill-btn" id="copyInciBtn" style="margin-top:8px;">
              üìã Copy to Clipboard
            </button>
          </div>
          <div class="lv-field" style="margin-top:12px;">
            <label class="lv-label" for="finalInciList">Final INCI Ingredient List</label>
            <textarea id="finalInciList" class="lv-textarea" style="min-height:100px;" placeholder="Aqua, Glycerin, Cetearyl Alcohol, etc."></textarea>
            <p class="lv-help">Required for all cosmetic products - must be in descending order by weight</p>
          </div>
          <div style="background:#fbf3e7;border:1px solid var(--lv-border);border-radius:8px;padding:12px;margin-top:12px;">
            <div style="font-size:12px;font-weight:600;margin-bottom:6px;">‚ö†Ô∏è Important Notice</div>
            <div style="font-size:11px;line-height:1.5;color:var(--lv-text-muted);">
              This AI assistant provides suggestions only. Always verify ingredients comply with local regulations (FDA, EU Cosmetics Regulation, etc.). You are responsible for accurate labeling and regulatory compliance.
            </div>
          </div>
        </div>
      </div>
    </section>

    <aside>
      <!-- PREVIEW CARD -->
      <div class="lv-card preview-card">
        <div class="lv-card-header">
          <div class="lv-card-title">Preview</div>
        </div>
        <div class="lv-card-body">
          <img id="previewImage" class="preview-product-img" alt="Product preview" style="display:none;" />
          <div id="previewImagePlaceholder" class="preview-product-img" style="display:flex;align-items:center;justify-content:center;font-size:11px;color:var(--lv-text-muted);">Product image</div>
          <span id="previewStatus" class="preview-status">Draft</span>
          <div id="previewTitle" class="preview-title">Untitled product</div>
          <div id="previewSubtitle" class="preview-subtitle"></div>
          <div id="previewPrice" class="preview-price">$0.00</div>
          <div id="previewMeta" class="preview-meta">Vendor ¬∑ Product</div>
        </div>
      </div>
      
      <!-- ORGANIZATION -->
      <div class="lv-card">
        <div class="lv-card-header"><div class="lv-card-title">Organization</div></div>
        <div class="lv-card-body">
          <div class="lv-field">
            <label class="lv-label" for="productType">Type</label>
            <input id="productType" class="lv-input" type="text" placeholder="Moisturizer" />
          </div>
          <div class="lv-field">
            <label class="lv-label" for="productVendor">Vendor</label>
            <input id="productVendor" class="lv-input" type="text" placeholder="Your Brand" />
          </div>
          <div class="lv-field">
            <label class="lv-label" for="collections">Collections</label>
            <input id="collections" class="lv-input" type="text" placeholder="Winter 2024" />
          </div>
          <div class="lv-field">
            <label class="lv-label" for="tags">Tags</label>
            <input id="tags" class="lv-input" type="text" placeholder="organic, vegan, cruelty-free" />
          </div>
          <div class="lv-field">
            <label class="lv-label">Product Categories</label>
            <p class="lv-help" style="margin-bottom:8px;">Select categories from your store</p>
            <div id="productCategoriesContainer" style="display:flex;flex-direction:column;gap:6px;">
              <div style="font-size:11px;color:var(--lv-text-muted);">Loading your categories...</div>
            </div>
          </div>
          <div class="lv-field">
            <label class="lv-label" for="productStatus">Status</label>
            <select id="productStatus" class="lv-select">
              <option value="draft">Draft</option>
              <option value="active">Active</option>
            </select>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <script>
    window.lumivueFeaturedInput=document.getElementById("featuredImage");
    const featuredTile=document.getElementById("featuredTile");
    const featuredInput=document.getElementById("featuredImage");
    const featuredPreview=document.getElementById("featuredPreview");
    const featuredLabel=document.getElementById("featuredLabel");
    const featuredRemove=document.getElementById("featuredRemove");
    
    const galleryTile=document.getElementById("galleryTile");
    const galleryInput=document.getElementById("galleryImages");
    const galleryLabel=document.getElementById("galleryLabel");
    const galleryPreviewContainer=document.getElementById("galleryPreviewContainer");
    let galleryState=[];
    
    const videoTile=document.getElementById("videoTile");
    const videoInput=document.getElementById("productVideo");
    const videoPreview=document.getElementById("videoPreview");
    const videoLabel=document.getElementById("videoLabel");
    const videoRemove=document.getElementById("videoRemove");
    
    // Featured image
    featuredTile.onclick=()=>featuredInput.click();
    featuredInput.onchange=()=>{
      const f=featuredInput.files?.[0];if(!f)return;
      const r=new FileReader();
      r.onload=e=>{
        featuredPreview.src=e.target.result;
        featuredPreview.style.display="block";
        featuredLabel.style.display="none";
        featuredRemove.style.display="inline-flex";
        // Update preview card
        document.getElementById("previewImage").src=e.target.result;
        document.getElementById("previewImage").style.display="block";
        document.getElementById("previewImagePlaceholder").style.display="none";
      };
      r.readAsDataURL(f);
    };
    featuredRemove.onclick=e=>{
      e.stopPropagation();
      featuredInput.value="";
      featuredPreview.src="";
      featuredPreview.style.display="none";
      featuredLabel.style.display="block";
      featuredRemove.style.display="none";
      // Reset preview card image
      document.getElementById("previewImage").src="";
      document.getElementById("previewImage").style.display="none";
      document.getElementById("previewImagePlaceholder").style.display="flex";
    };
    
    // Gallery (up to 19)
    function updateGalleryLabel(){const c=galleryState.length;galleryLabel.textContent=c?`${c} photo${c>1?"s":""} selected (max 19)`:"Add gallery photos\nUp to 19 additional images"}
    function renderGallery(){
      galleryPreviewContainer.innerHTML="";
      galleryState.forEach((item,i)=>{
        const tile=document.createElement("div");tile.className="lv-gallery-tile";
        const img=document.createElement("img");img.className="lv-gallery-img";img.src=item.url;
        const rm=document.createElement("span");rm.className="lv-gallery-remove";rm.textContent="‚úï";
        rm.onclick=()=>{URL.revokeObjectURL(item.url);galleryState.splice(i,1);renderGallery();updateGalleryLabel()};
        tile.append(img,rm);galleryPreviewContainer.appendChild(tile);
      });
    }
    galleryTile.onclick=()=>galleryInput.click();
    galleryInput.onchange=()=>{
      const files=[...(galleryInput.files||[])];if(!files.length)return;
      const remain=19-galleryState.length;const use=files.slice(0,remain);
      use.forEach(f=>galleryState.push({file:f,url:URL.createObjectURL(f)}));
      if(files.length>use.length)alert("Only the first 19 images are used.");
      renderGallery();updateGalleryLabel();
    };
    
    // Video
    videoTile.onclick=()=>videoInput.click();
    videoInput.onchange=async()=>{
      const f=videoInput.files?.[0];if(!f)return;
      const url=URL.createObjectURL(f);
      videoPreview.src=url;
      videoPreview.style.display="block";
      videoLabel.style.display="none";
      videoRemove.style.display="inline-flex";
      videoPreview.play().catch(()=>{});
    };
    videoPreview.onclick=()=>{videoPreview.paused?videoPreview.play().catch(()=>{}):videoPreview.pause()};
    videoRemove.onclick=e=>{e.stopPropagation();videoInput.value="";videoPreview.pause();videoPreview.src="";videoPreview.style.display="none";videoLabel.style.display="block";videoRemove.style.display="none"};
    
    function getFormData(){
      // Get selected categories
      const selectedCategories = [];
      document.querySelectorAll('input[name="productCategory"]:checked').forEach(cb => {
        selectedCategories.push(cb.value);
      });

      return{
        title:document.getElementById("productTitle").value||"Untitled product",
        subtitle:document.getElementById("productSubtitle").value||"",
        description:document.getElementById("productDescription").value||"",
        price:document.getElementById("price").value||"0",
        compareAt:document.getElementById("compareAt").value||"",
        costPerItem:document.getElementById("costPerItem").value||"",
        currency:document.getElementById("currency").value||"USD",
        sku:document.getElementById("sku").value||"",
        barcode:document.getElementById("barcode").value||"",
        trackInventory:document.getElementById("trackInventory").checked,
        inventoryLocation:document.getElementById("inventoryLocation").value||"",
        inventoryAvailable:document.getElementById("inventoryAvailable").value||"",
        weight:document.getElementById("weight").value||"",
        weightUnit:document.getElementById("weightUnit").value||"lb",
        type:document.getElementById("productType").value||"Product",
        vendor:document.getElementById("productVendor").value||"Vendor",
        collections:document.getElementById("collections").value||"",
        tags:document.getElementById("tags").value||"",
        categories:selectedCategories,
        status:document.getElementById("productStatus").value||"draft",
        // Variant metafield
        variantSize:document.getElementById("variantSize").value||"",
        variantColor:document.getElementById("variantColor").value||"",
        variantMaterial:document.getElementById("variantMaterial").value||"",
        variantStyle:document.getElementById("variantStyle").value||"",
        // Google Shopping
        googleAgeGroup:document.getElementById("googleAgeGroup").value||"",
        googleCondition:document.getElementById("googleCondition").value||"new",
        googleGender:document.getElementById("googleGender").value||"",
        googleMPN:document.getElementById("googleMPN").value||"",
        // SEO
        seoTitle:document.getElementById("seoTitle").value||"",
        seoDescription:document.getElementById("seoDescription").value||"",
        seoKeywords:document.getElementById("seoKeywords").value||"",
        seoUrl:document.getElementById("seoUrl").value||"",
        // INCI Ingredients
        inciIngredients:document.getElementById("finalInciList").value||"",
        formulationType:document.getElementById("productFormulationType").value||"",
        keyIngredients:document.getElementById("keyIngredients").value||"",
        formulationGoal:document.getElementById("formulationGoal").value||""
      }
    }
    window.lvGetFormData=getFormData;
    
    // Update preview card in real-time
    function updatePreview(){
      const title=document.getElementById("productTitle").value||"Untitled product";
      const subtitle=document.getElementById("productSubtitle").value;
      const price=document.getElementById("price").value||"0";
      const currency=document.getElementById("currency").value||"USD";
      const vendor=document.getElementById("productVendor").value||"Vendor";
      const type=document.getElementById("productType").value||"Product";
      const status=document.getElementById("productStatus").value||"draft";
      
      document.getElementById("previewTitle").textContent=title;
      document.getElementById("previewSubtitle").textContent=subtitle;
      document.getElementById("previewSubtitle").style.display=subtitle?"block":"none";
      document.getElementById("previewPrice").textContent=`${currency==="USD"?"$":currency}${parseFloat(price||0).toFixed(2)}`;
      document.getElementById("previewMeta").textContent=`${vendor} ¬∑ ${type}`;
      document.getElementById("previewStatus").textContent=status==="active"?"Active":"Draft";
    }
    
    // Attach event listeners for real-time preview
    document.getElementById("productTitle").addEventListener("input",updatePreview);
    document.getElementById("productSubtitle").addEventListener("input",updatePreview);
    document.getElementById("price").addEventListener("input",updatePreview);
    document.getElementById("currency").addEventListener("change",updatePreview);
    document.getElementById("productVendor").addEventListener("input",updatePreview);
    document.getElementById("productType").addEventListener("input",updatePreview);
    document.getElementById("productStatus").addEventListener("change",updatePreview);
    
    // Auto-generate URL slug from title
    document.getElementById("productTitle").addEventListener("input",()=>{
      const title=document.getElementById("productTitle").value;
      if(title&&!document.getElementById("seoUrl").value){
        const slug=title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");
        document.getElementById("seoUrl").value=slug;
      }
    });
    
    // SEO character counters
    document.getElementById("seoTitle").addEventListener("input",()=>{
      const count=document.getElementById("seoTitle").value.length;
      document.getElementById("seoTitleCount").textContent=count;
      document.getElementById("seoTitleCount").style.color=count>60?"#b91c1c":"var(--lv-text-muted)";
    });
    
    document.getElementById("seoDescription").addEventListener("input",()=>{
      const count=document.getElementById("seoDescription").value.length;
      document.getElementById("seoDescCount").textContent=count;
      document.getElementById("seoDescCount").style.color=count>160?"#b91c1c":"var(--lv-text-muted)";
    });
    
    document.getElementById("seoKeywords").addEventListener("input",()=>{
      const keywords=document.getElementById("seoKeywords").value.split(",").filter(k=>k.trim()).length;
      document.getElementById("seoKeywordsCount").textContent=keywords;
    });
    
    // Auto-Generate SEO
    document.getElementById("autoGenerateSeoBtn").addEventListener("click",()=>{
      const title=document.getElementById("productTitle").value;
      const description=document.getElementById("productDescription").value;
      const type=document.getElementById("productType").value||"Product";
      const vendor=document.getElementById("productVendor").value||"Brand";
      const price=document.getElementById("price").value;
      
      if(!title){
        alert("Please enter a product title first");
        return;
      }
      
      // Generate SEO Title (50-60 chars)
      let seoTitle=`${title}`;
      if(seoTitle.length<50){
        seoTitle+=` | ${type}`;
      }
      if(seoTitle.length<50){
        seoTitle+=` by ${vendor}`;
      }
      if(seoTitle.length>60){
        seoTitle=seoTitle.substring(0,57)+"...";
      }
      document.getElementById("seoTitle").value=seoTitle;
      document.getElementById("seoTitleCount").textContent=seoTitle.length;
      
      // Generate SEO Description (150-160 chars)
      let seoDesc=description?description.substring(0,140):`${title} - Premium ${type.toLowerCase()} by ${vendor}.`;
      if(price){
        seoDesc+=` Shop now for $${price}.`;
      }else{
        seoDesc+=" Shop now for the best quality.";
      }
      if(seoDesc.length>160){
        seoDesc=seoDesc.substring(0,157)+"...";
      }
      document.getElementById("seoDescription").value=seoDesc;
      document.getElementById("seoDescCount").textContent=seoDesc.length;
      
      // Generate Keywords
      const keywords=[
        type.toLowerCase(),
        vendor.toLowerCase(),
        "skincare","beauty","cosmetics"
      ];
      if(title.toLowerCase().includes("organic"))keywords.push("organic");
      if(title.toLowerCase().includes("natural"))keywords.push("natural");
      if(title.toLowerCase().includes("vegan"))keywords.push("vegan");
      if(title.toLowerCase().includes("cruelty"))keywords.push("cruelty-free");
      document.getElementById("seoKeywords").value=keywords.join(", ");
      document.getElementById("seoKeywordsCount").textContent=keywords.length;
      
      // Generate URL slug
      const slug=title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");
      document.getElementById("seoUrl").value=slug;
      
      // Show success message
      document.getElementById("seoSuccessMessage").style.display="block";
      setTimeout(()=>{
        document.getElementById("seoSuccessMessage").style.display="none";
      },3000);
    });
    
    // AI INCI Generator
    document.getElementById("generateInciBtn").addEventListener("click",async()=>{
      const formulationType=document.getElementById("productFormulationType").value;
      const keyIngredients=document.getElementById("keyIngredients").value;
      const formulationGoal=document.getElementById("formulationGoal").value;
      
      if(!formulationType||!keyIngredients){
        alert("Please select a product type and enter key ingredients");
        return;
      }
      
      const btn=document.getElementById("generateInciBtn");
      const loading=document.getElementById("inciLoadingState");
      const resultField=document.getElementById("inciResultField");
      
      btn.disabled=true;
      loading.style.display="block";
      resultField.style.display="none";
      
      try{
        // Simulate AI processing (in production, replace with actual API call)
        await new Promise(resolve=>setTimeout(resolve,2000));
        
        // Generate INCI list based on product type and key ingredients
        const inciList=generateInciList(formulationType,keyIngredients,formulationGoal);
        
        document.getElementById("inciResult").value=inciList;
        loading.style.display="none";
        resultField.style.display="block";
      }catch(err){
        console.error("INCI generation error:",err);
        alert("Error generating INCI list. Please try again.");
        loading.style.display="none";
      }finally{
        btn.disabled=false;
      }
    });
    
    // Copy INCI to clipboard
    document.getElementById("copyInciBtn").addEventListener("click",()=>{
      const inciText=document.getElementById("inciResult").value;
      navigator.clipboard.writeText(inciText).then(()=>{
        const btn=document.getElementById("copyInciBtn");
        const originalText=btn.textContent;
        btn.textContent="‚úÖ Copied!";
        setTimeout(()=>{btn.textContent=originalText},2000);
        
        // Also populate the final INCI field
        document.getElementById("finalInciList").value=inciText;
      });
    });
    
    // AI INCI List Generator Logic
    function generateInciList(type,keyIngredientsStr,goal){
      const keyIngredients=keyIngredientsStr.split(",").map(i=>i.trim()).filter(Boolean);
      
      // Base formulation templates (realistic INCI order)
      const baseTemplates={
        moisturizer:["Aqua","Glycerin","Cetearyl Alcohol","Caprylic/Capric Triglyceride","Butyrospermum Parkii (Shea) Butter","Ceteareth-20","Dimethicone","Tocopherol","Xanthan Gum","Phenoxyethanol","Ethylhexylglycerin","Parfum"],
        serum:["Aqua","Propanediol","Glycerin","Pentylene Glycol","Carbomer","Sodium Hydroxide","Phenoxyethanol","Ethylhexylglycerin"],
        cleanser:["Aqua","Cocamidopropyl Betaine","Sodium Cocoyl Isethionate","Glycerin","Coco-Glucoside","Sodium Chloride","Citric Acid","Phenoxyethanol","Parfum"],
        toner:["Aqua","Glycerin","Propanediol","Panthenol","Allantoin","Sodium Hyaluronate","Citric Acid","Sodium Benzoate","Potassium Sorbate"],
        mask:["Aqua","Kaolin","Bentonite","Glycerin","Titanium Dioxide","Cetearyl Alcohol","Caprylic/Capric Triglyceride","Phenoxyethanol","Ethylhexylglycerin"],
        oil:["Simmondsia Chinensis (Jojoba) Seed Oil","Prunus Armeniaca (Apricot) Kernel Oil","Argania Spinosa (Argan) Kernel Oil","Tocopherol","Parfum"],
        sunscreen:["Aqua","Ethylhexyl Methoxycinnamate","Butyl Methoxydibenzoylmethane","Octocrylene","Glycerin","Cetearyl Alcohol","Titanium Dioxide","Phenoxyethanol"],
        exfoliant:["Aqua","Glycerin","Propanediol","Lactic Acid","Glycolic Acid","Sodium Hydroxide","Xanthan Gum","Phenoxyethanol"],
        "eye-cream":["Aqua","Glycerin","Caprylic/Capric Triglyceride","Caffeine","Sodium Hyaluronate","Tocopherol","Carbomer","Phenoxyethanol"],
        "lip-balm":["Cera Alba","Butyrospermum Parkii (Shea) Butter","Cocos Nucifera (Coconut) Oil","Ricinus Communis (Castor) Seed Oil","Tocopherol","Parfum"],
        "body-lotion":["Aqua","Glycerin","Cetearyl Alcohol","Caprylic/Capric Triglyceride","Dimethicone","Tocopherol","Phenoxyethanol","Parfum"],
        shampoo:["Aqua","Sodium Laureth Sulfate","Cocamidopropyl Betaine","Glycerin","Panthenol","Citric Acid","Sodium Chloride","Phenoxyethanol","Parfum"],
        conditioner:["Aqua","Cetearyl Alcohol","Behentrimonium Chloride","Glycerin","Panthenol","Dimethicone","Tocopherol","Citric Acid","Phenoxyethanol","Parfum"]
      };
      
      // INCI name mapping for common ingredients
      const inciMap={
        "hyaluronic acid":"Sodium Hyaluronate",
        "niacinamide":"Niacinamide",
        "vitamin c":"Ascorbic Acid",
        "vitamin e":"Tocopherol",
        "retinol":"Retinol",
        "salicylic acid":"Salicylic Acid",
        "glycolic acid":"Glycolic Acid",
        "lactic acid":"Lactic Acid",
        "azelaic acid":"Azelaic Acid",
        "peptides":"Palmitoyl Tripeptide-1",
        "ceramides":"Ceramide NP",
        "squalane":"Squalane",
        "argan oil":"Argania Spinosa Kernel Oil",
        "jojoba oil":"Simmondsia Chinensis Seed Oil",
        "rosehip oil":"Rosa Canina Fruit Oil",
        "aloe vera":"Aloe Barbadensis Leaf Juice",
        "green tea":"Camellia Sinensis Leaf Extract",
        "centella":"Centella Asiatica Extract",
        "tea tree":"Melaleuca Alternifolia Leaf Oil",
        "caffeine":"Caffeine",
        "alpha arbutin":"Alpha-Arbutin",
        "kojic acid":"Kojic Acid",
        "tranexamic acid":"Tranexamic Acid"
      };
      
      // Get base template
      const baseList=[...(baseTemplates[type]||baseTemplates.moisturizer)];
      
      // Convert key ingredients to INCI names and insert into list
      const inciIngredients=keyIngredients.map(ing=>{
        const lower=ing.toLowerCase();
        return inciMap[lower]||ing.split(" ").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ");
      });
      
      // Insert actives after water/solvents but before preservatives
      const insertPosition=Math.min(4,baseList.length-3);
      inciIngredients.forEach((inci,idx)=>{
        if(!baseList.includes(inci)){
          baseList.splice(insertPosition+idx,0,inci);
        }
      });
      
      return baseList.join(", ");
    }
    
    // SEO Auto-Generation
    document.getElementById("autoGenerateSeoBtn").addEventListener("click",()=>{
      const title=document.getElementById("productTitle").value;
      const description=document.getElementById("productDescription").value;
      const type=document.getElementById("productType").value||"Product";
      const vendor=document.getElementById("productVendor").value||"Brand";
      const price=document.getElementById("price").value;
      
      if(!title){
        alert("Please enter a product title first");
        return;
      }
      
      // Generate SEO Title (50-60 chars)
      let seoTitle=`${title}`;
      if(seoTitle.length<50){
        seoTitle+=` | ${type}`;
      }
      if(seoTitle.length<50){
        seoTitle+=` by ${vendor}`;
      }
      if(seoTitle.length>60){
        seoTitle=seoTitle.substring(0,57)+"...";
      }
      document.getElementById("seoTitle").value=seoTitle;
      document.getElementById("seoTitleCount").textContent=seoTitle.length;
      
      // Generate SEO Description (150-160 chars)
      let seoDesc=description?description.substring(0,140):`${title} - Premium ${type.toLowerCase()} by ${vendor}.`;
      if(price){
        seoDesc+=` Shop now for $${price}.`;
      }else{
        seoDesc+=" Shop now for the best quality.";
      }
      if(seoDesc.length>160){
        seoDesc=seoDesc.substring(0,157)+"...";
      }
      document.getElementById("seoDescription").value=seoDesc;
      document.getElementById("seoDescCount").textContent=seoDesc.length;
      
      // Generate Keywords
      const keywords=[
        type.toLowerCase(),
        vendor.toLowerCase(),
        "skincare","beauty","cosmetics"
      ];
      if(title.toLowerCase().includes("organic"))keywords.push("organic");
      if(title.toLowerCase().includes("natural"))keywords.push("natural");
      if(title.toLowerCase().includes("vegan"))keywords.push("vegan");
      if(title.toLowerCase().includes("cruelty"))keywords.push("cruelty-free");
      document.getElementById("seoKeywords").value=keywords.join(", ");
      document.getElementById("seoKeywordsCount").textContent=keywords.length;
      
      // Generate URL slug
      const slug=title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");
      document.getElementById("seoUrl").value=slug;
      
      // Show success message
      document.getElementById("seoSuccessMessage").style.display="block";
      setTimeout(()=>{
        document.getElementById("seoSuccessMessage").style.display="none";
      },3000);
    });
    
    // Character counters for SEO fields
    function updateSeoCharacterCounts(){
      const titleLength=document.getElementById("seoTitle").value.length;
      const descLength=document.getElementById("seoDescription").value.length;
      const keywordsLength=document.getElementById("seoKeywords").value.split(",").length;
      
      document.getElementById("seoTitleCount").textContent=titleLength;
      document.getElementById("seoDescCount").textContent=descLength;
      document.getElementById("seoKeywordsCount").textContent=keywordsLength;
    }
    
    document.getElementById("seoTitle").addEventListener("input",updateSeoCharacterCounts);
    document.getElementById("seoDescription").addEventListener("input",updateSeoCharacterCounts);
    document.getElementById("seoKeywords").addEventListener("input",updateSeoCharacterCounts);
  </script>
</body>
</html>
