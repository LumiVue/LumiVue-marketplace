<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Products · LumiVue Marketplace</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Shared LumiVue theme -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Stripe.js (for future Checkout) -->
  <script src="https://js.stripe.com/v3"></script>

  <style>
    :root {
      --lv-bg: #f4f1eb;
      --lv-surface: #ffffff;
      --lv-border: #e6d7c6;
      --lv-border-strong: #d9c6b3;
      --lv-text: #2c1e19;
      --lv-text-muted: #7a6a5c;
      --lv-pill: #e3ceb2;
      --lv-pill-soft: #f6e6d6;
      --lv-accent: #c98a5a;
      --lv-accent-soft: #fbede1;
      --lv-radius-lg: 18px;
      --lv-shadow-soft: 0 24px 60px rgba(15, 23, 42, 0.18);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #f7eee4 0, #f4f1eb 38%, #f2ebe3 100%);
      color: var(--lv-text);
    }

    .lv-page-shell {
      max-width: 100%;
      margin: 0 auto;
      padding: 0 30px 72px;
    }

    /* === TOP BAR (thin LV bar) === */

    .lv-topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 0 10px;
      border-bottom: 1px solid var(--lv-border);
      background: #f7f1e8;
    }

    .lv-topbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lv-bubble {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      /* darker caramel so the mark is stronger */
      background: #c98a5a;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      color: #fff;
      letter-spacing: 0.04em;
    }

    .lv-brand-text {
      display: flex;
      flex-direction: column;
    }

    .lv-brand-name {
      font-size: 14px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .lv-brand-subtitle {
      font-size: 11px;
      color: var(--lv-text-muted);
      margin-top: 2px;
    }

    .lv-topbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lv-top-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 7px 16px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid var(--lv-border);
      background: #f9f2ea;
      color: var(--lv-text-muted);
      cursor: pointer;
      box-shadow: none;
      transform: none;
      transition: background-color 130ms ease, border-color 130ms ease, color 130ms ease;
    }

    .lv-top-pill:hover {
      background: #f6e6d6;
      border-color: var(--lv-border-strong);
      color: var(--lv-text);
    }

    .lv-top-pill--primary {
      background: var(--lv-accent);
      border-color: var(--lv-accent);
      color: #ffffff;
    }

    .lv-top-pill--primary:hover {
      background: #b9784b;
      border-color: #b9784b;
      color: #ffffff;
    }

    /* === LAYOUT === */

    .lv-layout {
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 20px;
      align-items: flex-start;
      margin-top: 24px;
    }

    @media (max-width: 1200px) {
      .lv-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* === CATEGORIES CARD === */

    .lv-card {
      background: var(--lv-surface);
      border-radius: 24px;
      border: 1px solid rgba(233, 216, 197, 0.8);
      box-shadow: var(--lv-shadow-soft);
    }

    .lv-card--categories {
      padding: 18px 18px 16px;
      position: sticky;
      top: 20px;
    }

    .lv-card-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .lv-label-pill {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--lv-text-muted);
    }

    .lv-pill-count {
      min-width: 26px;
      text-align: center;
      padding: 4px 0;
      border-radius: 999px;
      background: var(--lv-pill-soft);
      font-size: 11px;
      color: var(--lv-text);
    }

    .lv-category-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .lv-category-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 10px;
      border-radius: 999px;
      cursor: pointer;
      transition: background-color 130ms ease, color 130ms ease;
    }

    .lv-category-row span {
      font-size: 13px;
    }

    .lv-category-row .lv-count {
      font-size: 11px;
      color: var(--lv-text-muted);
    }

    .lv-category-row--active {
      background: #f6e6d6;
      color: var(--lv-text);
    }

    .lv-category-row:not(.lv-category-row--active):hover {
      background: #f9f2ea;
      color: var(--lv-text);
    }

    /* === PRODUCTS COLUMN === */

    .lv-products-column {
      display: flex;
      flex-direction: column;
      gap: 24px;
      background: transparent;
      border: none;
      box-shadow: none;
      padding: 0;
    }

    .lv-section-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 16px;
    }

    .lv-section-title {
      font-size: 18px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .lv-section-sub {
      font-size: 13px;
      color: var(--lv-text-muted);
      margin-top: 4px;
    }

    /* === 5-COLUMN GRIDS (Featured + All items) === */

    .lv-featured-row,
    .lv-products-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 22px;
    }

    @media (max-width: 1400px) {
      .lv-featured-row,
      .lv-products-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
      }
    }

    @media (max-width: 1100px) {
      .lv-featured-row,
      .lv-products-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 800px) {
      .lv-featured-row,
      .lv-products-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 520px) {
      .lv-featured-row,
      .lv-products-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .lv-all-items-block {
      margin-top: 8px;
    }

    .lv-all-items-title {
      font-size: 14px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      margin: 0 0 12px 0;
      color: var(--lv-text-muted);
    }

    /* === PRODUCT CARD === */

    .lv-product-card {
      background: var(--lv-surface);
      border-radius: 22px;
      border: 1px solid rgba(233, 216, 197, 0.9);
      box-shadow: var(--lv-shadow-soft);
      padding: 8px 8px 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: border-color 130ms ease, background-color 130ms ease;
    }

    .lv-product-card:hover {
      border-color: var(--lv-border-strong);
      background: #fdf8f3;
    }

    .lv-product-media {
      width: 100%;
      padding-top: 68%;
      border-radius: 18px;
      overflow: hidden;
      position: relative;
      background-color: #f6e6d6;
    }

    .lv-product-media img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .lv-product-title {
      font-size: 13px;
      font-weight: 600;
      line-height: 1.35;
      margin-top: 2px;
    }

    .lv-product-sub {
      font-size: 12px;
      color: var(--lv-text-muted);
      line-height: 1.4;
    }

    .lv-product-price-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      margin-top: 2px;
    }

    .lv-price {
      font-weight: 600;
      font-size: 13px;
    }

    .lv-unit {
      font-size: 11px;
      color: var(--lv-text-muted);
    }

    .lv-tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .lv-mini-pill {
      padding: 3px 7px;
      border-radius: 999px;
      font-size: 10px;
      background: #f6e6d6;
      color: var(--lv-text-muted);
    }

    .lv-cta-row {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
    }

    .lv-btn-primary,
    .lv-btn-ghost {
      flex: 1;
      font-size: 11px;
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid transparent;
      cursor: pointer;
      transition: background-color 130ms ease, color 130ms ease, border-color 130ms ease;
      box-shadow: none;
      transform: none;
    }

    .lv-btn-primary {
      background: var(--lv-accent);
      color: #fff;
      border-color: var(--lv-accent);
    }

    .lv-btn-primary:hover {
      background: #b9784b;
      border-color: #b9784b;
    }

    .lv-btn-ghost {
      background: #f9f2ea;
      color: var(--lv-text);
      border-color: var(--lv-border);
    }

    .lv-btn-ghost:hover {
      background: #f6e1ce;
      border-color: #f1d0b3;
    }
  </style>
</head>
<body>
  <div class="lv-page-shell">
    <!-- TOP BAR -->
    <header class="lv-topbar">
      <div class="lv-topbar-left">
        <div class="lv-bubble">LV</div>
        <div class="lv-brand-text">
          <div class="lv-brand-name">LUMIVUE</div>
          <div class="lv-brand-subtitle">Creator products · Storefront view</div>
        </div>
      </div>
      <div class="lv-topbar-right">
        <button class="lv-top-pill" type="button" onclick="window.location.href='marketplace.html'">Marketplace</button>
        <button class="lv-top-pill lv-top-pill--primary" type="button" onclick="window.location.href='store.html'">Storefront</button>
      </div>
    </header>

    <!-- MAIN LAYOUT -->
    <main class="lv-layout">
      <!-- CATEGORIES -->
      <aside class="lv-card lv-card--categories">
        <div class="lv-card-header-row">
          <div class="lv-label-pill">Categories</div>
          <!-- total products = 10 -->
          <div class="lv-pill-count">10</div>
        </div>

        <div class="lv-category-list">
          <div class="lv-category-row lv-category-row--active" data-category="All">
            <span>All</span>
            <span class="lv-count">10</span>
          </div>
          <div class="lv-category-row" data-category="Body Products">
            <span>Body Products</span>
            <span class="lv-count">1</span>
          </div>
          <div class="lv-category-row" data-category="Face Cleansers">
            <span>Face Cleansers</span>
            <span class="lv-count">2</span>
          </div>
          <div class="lv-category-row" data-category="Face Moisturizers">
            <span>Face Moisturizers</span>
            <span class="lv-count">2</span>
          </div>
          <div class="lv-category-row" data-category="Face Serums">
            <span>Face Serums</span>
            <span class="lv-count">3</span>
          </div>
          <div class="lv-category-row" data-category="Toners & Mists">
            <span>Toners &amp; Mists</span>
            <span class="lv-count">2</span>
          </div>
        </div>
      </aside>

      <!-- PRODUCTS COLUMN -->
      <section class="lv-products-column" id="products-anchor">
        <!-- FEATURED (row of 5) -->
        <div class="lv-section-header">
          <div>
            <h2 class="lv-section-title">Featured Products</h2>
            <p class="lv-section-sub">
              Curated hero products from this creator’s LumiVue storefront.
            </p>
          </div>
        </div>

        <div class="lv-featured-row">
          <!-- 1: Face Moisturizer -->
          <article class="lv-product-card" data-category="Face Moisturizers">
            <div class="lv-product-media">
              <img
                src="https://images.pexels.com/photos/28481891/pexels-photo-28481891.jpeg?auto=compress&cs=tinysrgb&w=1200"
                alt="Glow Face Moisturizer" />
            </div>
            <div class="lv-product-title">Glow Face Moisturizer · Niacinamide + Peptides</div>
            <div class="lv-product-sub">Lightweight daily cream for soft, luminous skin.</div>
            <div class="lv-product-price-row">
              <span class="lv-price">$23.95</span>
              <span class="lv-unit">50 ml · 1.7 fl oz</span>
            </div>
            <div class="lv-tag-row">
              <span class="lv-mini-pill">Moisturizer</span>
              <span class="lv-mini-pill">Niacinamide</span>
              <span class="lv-mini-pill">Peptides</span>
            </div>
            <div class="lv-cta-row">
              <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
              <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
            </div>
          </article>

          <!-- 2: Face Cleanser -->
          <article class="lv-product-card" data-category="Face Cleansers">
            <div class="lv-product-media">
              <img
                src="https://images.pexels.com/photos/29022724/pexels-photo-29022724.jpeg?auto=compress&cs=tinysrgb&w=1200"
                alt="Calm Oil Cleansing Balm" />
            </div>
            <div class="lv-product-title">Calm Oil Cleansing Balm · Oil to Milk</div>
            <div class="lv-product-sub">Gentle melt-away balm for sunscreen &amp; makeup.</div>
            <div class="lv-product-price-row">
              <span class="lv-price">$19.15</span>
              <span class="lv-unit">100 ml · 3.4 fl oz</span>
            </div>
            <div class="lv-tag-row">
              <span class="lv-mini-pill">Cleanser</span>
              <span class="lv-mini-pill">Oil to milk</span>
            </div>
            <div class="lv-cta-row">
              <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
              <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
            </div>
          </article>

          <!-- 3: Face Serum -->
          <article class="lv-product-card" data-category="Face Serums">
            <div class="lv-product-media">
              <img
                src="https://images.pexels.com/photos/10825674/pexels-photo-10825674.jpeg?auto=compress&cs=tinysrgb&w=1200"
                alt="Frankincense Glow Face Drops" />
            </div>
            <div class="lv-product-title">Frankincense Glow Face Drops · Radiance Serum</div>
            <div class="lv-product-sub">Concentrated treatment with botanical oils.</div>
            <div class="lv-product-price-row">
              <span class="lv-price">$25.85</span>
              <span class="lv-unit">30 ml · 1 fl oz</span>
            </div>
            <div class="lv-tag-row">
              <span class="lv-mini-pill">Serum</span>
              <span class="lv-mini-pill">Radiance</span>
            </div>
            <div class="lv-cta-row">
              <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
              <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
            </div>
          </article>

          <!-- 4: Face Serum -->
          <article class="lv-product-card" data-category="Face Serums">
            <div class="lv-product-media">
              <img
                src="https://images.pexels.com/photos/2256108/pexels-photo-2256108.jpeg?auto=compress&cs=tinysrgb&w=1200"
                alt="2.5% Retinol Booster Serum" />
            </div>
            <div class="lv-product-title">2.5% Retinol Booster Serum · Night Treatment</div>
            <div class="lv-product-sub">Targeted overnight serum for smoother texture.</div>
            <div class="lv-product-price-row">
              <span class="lv-price">$31.95</span>
              <span class="lv-unit">30 ml · 1 fl oz</span>
            </div>
            <div class="lv-tag-row">
              <span class="lv-mini-pill">Serum</span>
              <span class="lv-mini-pill">Retinol</span>
              <span class="lv-mini-pill">Night</span>
            </div>
            <div class="lv-cta-row">
              <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
              <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
            </div>
          </article>

          <!-- 5: Toner -->
          <article class="lv-product-card" data-category="Toners & Mists">
            <div class="lv-product-media">
              <img
                src="https://images.pexels.com/photos/17783855/pexels-photo-17783855.jpeg?auto=compress&cs=tinysrgb&w=1200"
                alt="Rose Water Balancing Toner" />
            </div>
            <div class="lv-product-title">Rose Water Balancing Toner · Calming Mist</div>
            <div class="lv-product-sub">A fine rosewater mist to rebalance and refresh skin.</div>
            <div class="lv-product-price-row">
              <span class="lv-price">$18.50</span>
              <span class="lv-unit">100 ml · 3.4 fl oz</span>
            </div>
            <div class="lv-tag-row">
              <span class="lv-mini-pill">Toner</span>
              <span class="lv-mini-pill">Rose</span>
              <span class="lv-mini-pill">Calming</span>
            </div>
            <div class="lv-cta-row">
              <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
              <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
            </div>
          </article>
        </div>

        <!-- ALL ITEMS (second row of 5) -->
        <div class="lv-all-items-block">
          <h3 class="lv-all-items-title">All items</h3>
          <div class="lv-products-grid">
            <!-- 6: Face Moisturizer -->
            <article class="lv-product-card" data-category="Face Moisturizers">
              <div class="lv-product-media">
                <img
                  src="https://images.pexels.com/photos/7317087/pexels-photo-7317087.jpeg?auto=compress&cs=tinysrgb&w=1200"
                  alt="Ceramide Barrier Cream" />
              </div>
              <div class="lv-product-title">Ceramide Barrier Cream · Repair Moisturizer</div>
              <div class="lv-product-sub">Rich cream that cushions and strengthens the skin barrier.</div>
              <div class="lv-product-price-row">
                <span class="lv-price">$27.00</span>
                <span class="lv-unit">50 ml · 1.7 fl oz</span>
              </div>
              <div class="lv-tag-row">
                <span class="lv-mini-pill">Moisturizer</span>
                <span class="lv-mini-pill">Ceramides</span>
                <span class="lv-mini-pill">Barrier</span>
              </div>
              <div class="lv-cta-row">
                <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
                <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
              </div>
            </article>

            <!-- 7: Face Serum -->
            <article class="lv-product-card" data-category="Face Serums">
              <div class="lv-product-media">
                <img
                  src="https://images.pexels.com/photos/30835429/pexels-photo-30835429.jpeg?auto=compress&cs=tinysrgb&w=1200"
                  alt="Vitamin C Brightening Serum" />
              </div>
              <div class="lv-product-title">Vitamin C Brightening Serum · Day Concentrate</div>
              <div class="lv-product-sub">Daily vitamin C serum for a softer, more radiant tone.</div>
              <div class="lv-product-price-row">
                <span class="lv-price">$29.75</span>
                <span class="lv-unit">30 ml · 1 fl oz</span>
              </div>
              <div class="lv-tag-row">
                <span class="lv-mini-pill">Serum</span>
                <span class="lv-mini-pill">Vitamin C</span>
                <span class="lv-mini-pill">Brightening</span>
              </div>
              <div class="lv-cta-row">
                <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
                <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
              </div>
            </article>

            <!-- 8: Face Cleanser -->
            <article class="lv-product-card" data-category="Face Cleansers">
              <div class="lv-product-media">
                <img
                  src="https://images.pexels.com/photos/11074378/pexels-photo-11074378.jpeg?auto=compress&cs=tinysrgb&w=1200"
                  alt="Cloud Foam Gel Cleanser" />
              </div>
              <div class="lv-product-title">Cloud Foam Gel Cleanser · Gentle Lather</div>
              <div class="lv-product-sub">Cushiony gel that foams into a cloud-soft face wash.</div>
              <div class="lv-product-price-row">
                <span class="lv-price">$21.40</span>
                <span class="lv-unit">120 ml · 4 fl oz</span>
              </div>
              <div class="lv-tag-row">
                <span class="lv-mini-pill">Cleanser</span>
                <span class="lv-mini-pill">Gentle</span>
              </div>
              <div class="lv-cta-row">
                <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
                <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
              </div>
            </article>

            <!-- 9: Body Product -->
            <article class="lv-product-card" data-category="Body Products">
              <div class="lv-product-media">
                <img
                  src="https://images.pexels.com/photos/29675496/pexels-photo-29675496.jpeg?auto=compress&cs=tinysrgb&w=1200"
                  alt="Botanical Body Oil" />
              </div>
              <div class="lv-product-title">Botanical Body Oil · Neroli &amp; Vanilla</div>
              <div class="lv-product-sub">Silky body oil infused with cold-pressed plant extracts.</div>
              <div class="lv-product-price-row">
                <span class="lv-price">$34.00</span>
                <span class="lv-unit">100 ml · 3.4 fl oz</span>
              </div>
              <div class="lv-tag-row">
                <span class="lv-mini-pill">Body</span>
                <span class="lv-mini-pill">Neroli</span>
                <span class="lv-mini-pill">Vanilla</span>
              </div>
              <div class="lv-cta-row">
                <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
                <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
              </div>
            </article>

            <!-- 10: Mist -->
            <article class="lv-product-card" data-category="Toners & Mists">
              <div class="lv-product-media">
                <img
                  src="https://images.pexels.com/photos/27041091/pexels-photo-27041091.jpeg?auto=compress&cs=tinysrgb&w=1200"
                  alt="Hydrating Mist Essence" />
              </div>
              <div class="lv-product-title">Hydrating Mist Essence · Dewy Finish</div>
              <div class="lv-product-sub">Lightweight essence-mist that adds instant dew and comfort.</div>
              <div class="lv-product-price-row">
                <span class="lv-price">$22.10</span>
                <span class="lv-unit">80 ml · 2.7 fl oz</span>
              </div>
              <div class="lv-tag-row">
                <span class="lv-mini-pill">Mist</span>
                <span class="lv-mini-pill">Hydrating</span>
              </div>
              <div class="lv-cta-row">
                <button type="button" class="lv-btn-primary" onclick="window.location.href='listing.html'">Add to bag</button>
                <button type="button" class="lv-btn-ghost" onclick="window.location.href='create-listing.html'">View details</button>
              </div>
            </article>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- JS: category filter + scroll -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const categoryRows = document.querySelectorAll('.lv-category-row');
      const productsAnchor = document.getElementById('products-anchor');
      const productCards = document.querySelectorAll('.lv-product-card');

      function applyFilter(filterLabel) {
        productCards.forEach(card => {
          const cardCategory = card.getAttribute('data-category') || '';
          if (filterLabel === 'All') {
            card.style.display = '';
          } else {
            card.style.display = (cardCategory === filterLabel) ? '' : 'none';
          }
        });
      }

      if (categoryRows.length && productsAnchor) {
        categoryRows.forEach(row => {
          row.addEventListener('click', function () {
            categoryRows.forEach(r => r.classList.remove('lv-category-row--active'));
            row.classList.add('lv-category-row--active');

            const filter = row.getAttribute('data-category') || 'All';
            applyFilter(filter);
            productsAnchor.scrollIntoView({ behavior: 'smooth', block: 'start' });
          });
        });
      }

      applyFilter('All');
    });
  </script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const db = firebase.firestore();
  const productsGrid = document.querySelector(".lv-products-grid");
  const featuredRow = document.querySelector(".lv-featured-row");
  const categoryList = document.querySelector(".lv-category-list");
  const pillCount = document.querySelector(".lv-pill-count");

  try {
    // Get all listings for this vendor
    const snapshot = await db.collection("listings").get();

    // If NO listings exist -> keep YOUR demo cards visible
    if (snapshot.empty) {
      console.log("No listings yet — showing demo template cards.");
      return;
    }

    // Listings exist → REMOVE demo cards
    productsGrid.innerHTML = "";
    featuredRow.innerHTML = "";

    const categoryCounts = {};

    snapshot.forEach(doc => {
      const data = doc.data();

      // Count categories
      if (!categoryCounts[data.productType]) {
        categoryCounts[data.productType] = 1;
      } else {
        categoryCounts[data.productType]++;
      }

      // Build card HTML with your EXACT design
      const card = `
      <article class="lv-product-card" data-category="${data.productType}">
        <div class="lv-product-media">
          <img src="${data.images?.[0] || ''}" alt="${data.title}" />
        </div>

        <div class="lv-product-title">${data.title}</div>
        <div class="lv-product-sub">${data.subtitle || ""}</div>

        <div class="lv-product-price-row">
          <span class="lv-price">$${data.price}</span>
          <span class="lv-unit">${data.size || ""}</span>
        </div>

        <div class="lv-tag-row">
          ${(data.tags || []).map(t => `<span class="lv-mini-pill">${t}</span>`).join("")}
        </div>

        <div class="lv-cta-row">
          <button type="button" class="lv-btn-primary">Add to bag</button>
          <button type="button" class="lv-btn-ghost" onclick="window.location.href='listing.html?id=${doc.id}'">View details</button>
        </div>
      </article>
      `;

      // Add to ALL ITEMS
      productsGrid.insertAdjacentHTML("beforeend", card);

      // Add first 5 to FEATURED
      if (featuredRow.children.length < 5) {
        featuredRow.insertAdjacentHTML("beforeend", card);
      }
    });

    // Update category counts + regenerate category list
    categoryList.innerHTML = `
      <div class="lv-category-row lv-category-row--active" data-category="All">
        <span>All</span>
        <span class="lv-count">${snapshot.size}</span>
      </div>
    `;

    Object.keys(categoryCounts).forEach(cat => {
      categoryList.insertAdjacentHTML(
        "beforeend",
        `
        <div class="lv-category-row" data-category="${cat}">
          <span>${cat}</span>
          <span class="lv-count">${categoryCounts[cat]}</span>
        </div>
        `
      );
    });

    pillCount.textContent = snapshot.size;

  } catch (err) {
    console.error("Error loading listings:", err);
  }
});
</script>

</body>
</html>
